@using EntityLayer.Enums
@model System.Collections.Generic.List<DTOLayer.AppointmentDtos.ResultAppointmentDto>?

@{
    Layout = "~/Views/Admin/index.cshtml";
}

        <div class="flex-1 overflow-y-auto p-8 scroll-smooth">
            <div class="max-w-7xl mx-auto flex flex-col gap-6 pb-12">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                    <div>
                        <h2 class="text-2xl font-bold text-text-main">Randevular</h2>
                        <p class="text-text-secondary text-sm mt-1">Klinik randevularını yönetin ve takibi sağlayın.</p>
                    </div>
                    <a class="bg-primary hover:bg-blue-600 text-white px-5 py-2.5 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 shadow-sm shadow-blue-200 w-full md:w-auto"
                        href="~/Admin/Appointment/CreateAppointment">
                        <span class="material-symbols-outlined text-[20px]">add</span>
                        Randevu Oluştur
                    </a>
                </div>
                <div class="flex flex-wrap items-center gap-3">
                    <div class="relative">
                        <select
                            class="block w-40 pl-3 pr-10 py-2 text-sm border-gray-200 rounded-lg focus:border-primary focus:ring-primary">
                            <option>Bugün</option>
                            <option>Bu Hafta</option>
                            <option>Bu Ay</option>
                            <option>Tümü</option>
                        </select>
                    </div>
                    <div class="relative">
                        <select
                            class="block w-40 pl-3 pr-10 py-2 text-sm border-gray-200 rounded-lg focus:border-primary focus:ring-primary">
                            <option>Tüm Durumlar</option>
                            <option>Planlandı</option>
                            <option>Tamamlandı</option>
                            <option>İptal</option>
                        </select>
                    </div>
                </div>
                <div class="bg-surface-white rounded-2xl border border-gray-200 shadow-soft overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                            <thead>
                                <tr class="bg-gray-50/50 border-b border-gray-100">
                                    <th
                                        class="px-6 py-4 text-xs font-semibold text-text-secondary uppercase tracking-wider">
                                        Hayvan</th>
                                    <th
                                        class="px-6 py-4 text-xs font-semibold text-text-secondary uppercase tracking-wider">
                                        Sahibi</th>
                                    <th
                                        class="px-6 py-4 text-xs font-semibold text-text-secondary uppercase tracking-wider">
                                        Tarih</th>
                                    <th
                                        class="px-6 py-4 text-xs font-semibold text-text-secondary uppercase tracking-wider">
                                        Saat</th>
                                    <th
                                        class="px-6 py-4 text-xs font-semibold text-text-secondary uppercase tracking-wider">
                                        İşlem Türü</th>
                                    <th
                                        class="px-6 py-4 text-xs font-semibold text-text-secondary uppercase tracking-wider">
                                        Durum</th>
                                    <th
                                        class="px-6 py-4 text-xs font-semibold text-text-secondary uppercase tracking-wider text-right">
                                        İşlemler</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                            @foreach (var item in Model)
                            {
                                <tr class="hover:bg-gray-50/50 transition-colors group">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center gap-3">
                                        <div
                                            class="size-9 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 shrink-0">
                                            <span class="material-symbols-outlined text-[20px]">pets</span>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-text-main">@item.AnimalName</p>
                                            <p class="text-xs text-text-secondary">@item.AnimalSpecies • @item.AnimalAge</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center gap-2">
                                        <div
                                            class="size-6 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-xs font-bold">
                                            A</div>
                                        <span class="text-sm text-text-secondary">Ayşe Demir</span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="text-sm text-text-main">@item.Date
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span
                                        class="text-sm font-semibold text-text-main bg-gray-100 px-2.5 py-1 rounded-md">@item.Time</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="text-sm text-text-main">@item.Notes</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    @switch (item.Status)
                                    {
                                        case AppointmentStatus.Planlanmış:
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                <span class="size-1.5 rounded-full bg-blue-600 mr-1.5"></span>
                                                Planlanmış
                                            </span>
                                            break;

                                        case AppointmentStatus.Tamamlanmış:
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                <span class="size-1.5 rounded-full bg-green-600 mr-1.5"></span>
                                                Tamamlanmış
                                            </span>
                                            break;

                                        case AppointmentStatus.İptal:
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                <span class="size-1.5 rounded-full bg-red-600 mr-1.5"></span>
                                                İptal
                                            </span>
                                            break;
                                    }
                                </td>


                                <td class="px-6 py-4 whitespace-nowrap text-right">
                                    <div class="flex items-center justify-end gap-2">
                                        <a
                                            href="~/Admin/Appointment/ChangeStatusTrue/@item.AppointmentId"
                                            class="p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                                            title="Onayla">
                                            <span class="material-symbols-outlined text-[18px]">check_circle</span>
                                        </a>
                                        <a
                                            href="/Admin/Appointment/UpdateAppointment/@item.AppointmentId"
                                            class="p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                                            title="Görüntüle">
                                            <span class="material-symbols-outlined text-[18px]">visibility</span>
                                        </a>
                                        <a
                                            href="~/Admin/Appointment/ChangeStatusFalse/@item.AppointmentId"
                                            class="p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors"
                                            title="İptal Et">
                                            <span class="material-symbols-outlined text-[18px]">cancel</span>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                
                </div>
            </div>
        </div>